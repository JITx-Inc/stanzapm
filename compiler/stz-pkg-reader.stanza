defpackage stz/pkg-reader :
  import core
  import collections
  import stz/pkg
  import stz/asm-emitter
  import stz/backend

defn main () :
  val filename = command-line-arguments()[1]
  val pkg = load-package(filename)
  println(pkg)
  
  ;val outname = command-line-arguments()[2]
  ;with-output-stream{FileOutputStream(outname), _} $ fn () :
  ;  val backend = X86Backend()
  ;  for e in pkg do :
  ;    emit(e, backend)    

main()